(()=>{var L=(e=>typeof require!="undefined"?require:typeof Proxy!="undefined"?new Proxy(e,{get:(t,o)=>(typeof require!="undefined"?require:t)[o]}):e)(function(e){if(typeof require!="undefined")return require.apply(this,arguments);throw new Error('Dynamic require of "'+e+'" is not supported')});var G="__global_state__",N="__guid__",I="__eid__",p="__aid__";var E="__eUser__";var f="__mid__";var l="__fansly_browser_info__",C="__roleData__";var c="session_active_session",d="__username__",W="__sign__";var m="theme_service_current_theme";function D(e){return{invoke:async(t,...o)=>{let r=o.map(i=>i),n=await e?.invoke(t.toString(),...r);if(n?.hasOwnProperty.call(n,"error"))throw n;return n},send:(t,...o)=>{let r=o.map(n=>n);e?.send(t.toString(),...r)},on:(t,o)=>{e?.on(t.toString(),(r,...n)=>{o(...n)})},off:t=>{e?.removeAllListeners(t.toString())}}}var g=L("electron/renderer");var h=null;function x(e){h=e}var s=D(g.ipcRenderer);x(s);async function R(){if(!(localStorage.getItem("__isLogin__")==="true"))return;let t=b();s.send("ON_FANSLY_LOGIN",t)}function b(){let e=localStorage.getItem(c),t=localStorage.getItem(d),o=localStorage.getItem(W);return{session:{session_active_session:e},loginInfo:{username:t,sign:o}}}async function F(e){if(new URL(e).hostname==="fansly.com")try{window.history.pushState({},"",e),window.dispatchEvent(new Event("popstate"))}catch(o){s.send("PAGE_GO_FAIL",e)}}var T={APP_VERSION:"5.6.1",BEAR_BUILD_ENV:"online",BEAR_BUILD_TIME:"1760426093177",DEVICE_PLATFORM:"darwin",DEVICE_ARCH:"arm64",DEVICE_ISMCHIP:"true"};var a={},u=T.APP_VERSION,A=typeof process<"u"||!0;var M="https://fansly.com";var fe=A?"https://b0903d11cc6e4dc29a1d827d0618a422@o1278259.ingest.sentry.io/6581257":a.env?.VITE_SENTRY_DSN,X=A?"https://api2.infloww.com":a.env?.VITE_API_URL,Ce=`https://embeded-infloww-lite.infloww.com/${u}/index.html?t=${Date.now()}#/_token`,de=(A?"false":a.env?.VITE_IS_TEST_MODE)==="true",We=A?process.env.VITE_GRAY_RELEASE=="true":a.env?.VITE_GRAY_RELEASE=="true";var De={...T,API_BASE_URL:X,MACHINE_CODE:""};var xe=T.BEAR_BUILD_TIME,ge=A?process.env.VITE_HTTP_ENCRYPT_DISABLE==="true":a.env?.VITE_HTTP_ENCRYPT_DISABLE==="true",Re=a.env?.VITE_DRM_CDN_URL;var P="__PRELOAD_AUTH__";var U="X-UNID";var _=L("electron");_.contextBridge.exposeInMainWorld("ipcRenderer",{invoke:_.ipcRenderer?.invoke.bind(_.ipcRenderer),on:_.ipcRenderer?.on.bind(_.ipcRenderer),once:_.ipcRenderer?.once.bind(_.ipcRenderer),send:_.ipcRenderer?.send.bind(_.ipcRenderer),removeAllListeners:_.ipcRenderer?.removeAllListeners.bind(_.ipcRenderer)});_.contextBridge.exposeInMainWorld("appEnv",{isWindows:process.platform==="win32",isMac:process.platform==="darwin",version:u});var y=L("electron");function H(e){return new Promise(t=>{setTimeout(()=>{t(e)},e)})}(async()=>{let e=await y.ipcRenderer?.invoke("GET_ACCOUNT_INFO");if(e.data,window?.localStorage||await H(200),e.data){let{accountList:t,employeeId:o,machineId:r,globalState:n}=e.data;localStorage.setItem(N,r),localStorage.setItem(G,JSON.stringify(n||{}));let i=t.find(S=>S.employeeId===o);if(window.__account__={account:i,machineId:r},i){let{unid:S,employeeId:B,token:w,employeeEmail:Y,agencyId:v}=i;localStorage.setItem(P,w),localStorage.setItem(U,S),localStorage.setItem(I,B),localStorage.setItem(p,v),localStorage.setItem(E,Y);return}}localStorage.removeItem(P),localStorage.removeItem(I),localStorage.removeItem(p),localStorage.removeItem(E),localStorage.removeItem(U)})();(async()=>{s.on("PAGE_GO",async r=>{if(!r.startsWith(M))return;let n=window.location.href;n.startsWith(r)||F(r)}),s.on("REQUEST_ME",()=>{R()}),localStorage.setItem("age_guard_age_guard","true"),localStorage.setItem("age_guard_age_confirm","true");let e=await s.invoke("GET_BROWSER_INFO");if(!e||!window?.localStorage)return;let{data:t}=e;localStorage.setItem("__isLogin__",t?.isLogin||!1),localStorage.setItem(l,JSON.stringify(e.data)),localStorage.setItem("notifications_notification_alert_init","true"),localStorage.setItem("web_push_web_push_ack","true"),localStorage.setItem("age_guard_age_guard","true"),localStorage.setItem("age_guard_age_confirm","true"),localStorage.setItem(f,e.data?.modelId),sessionStorage.setItem(C,e.data?.roles),t?.session?.sessionId&&localStorage.setItem(c,t?.session?.sessionId);let o=await s.invoke("GET_CUSTOM_STORE","THEME_PLATFORM_SYNC");o.data?.platforms?.FANSLY&&o.data?.theme?localStorage.setItem(m,o.data?.theme==="dark"?"dark":"bright"):localStorage.setItem(m,"")})();})();
