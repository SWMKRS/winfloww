(()=>{var v="__xhr",g=["load","loadend","timeout","error","readystatechange","abort"];function m(e,o){var r={};for(var d in e)r[d]=e[d];return r.target=r.currentTarget=o,r}function E(e,o){o=o||window,o[v]=o[v]||o.XMLHttpRequest,o.XMLHttpRequest=function(){for(var n=new o[v],t=0;t<g.length;++t){var s="on"+g[t];n[s]===void 0&&(n[s]=null)}for(var a in n){var f="";try{f=typeof n[a]}catch{}f==="function"?this[a]=h(a):Object.defineProperty(this,a,{get:r(a),set:d(a),enumerable:!0})}var i=this;n.getProxy=function(){return i},this.xhr=n},Object.assign(o.XMLHttpRequest,{UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4});function r(n){return function(){var t=this.hasOwnProperty(n+"_")?this[n+"_"]:this.xhr[n],s=(e[n]||{}).getter;return s&&s(t,this)||t}}function d(n){return function(t){var s=this.xhr,a=this,f=e[n];if(n.substring(0,2)==="on")a[n+"_"]=t,s[n]=function(u){u=m(u,a);var c=e[n]&&e[n].call(a,s,u);c||t.call(a,u)};else{var i=(f||{}).setter;t=i&&i(t,a)||t,this[n+"_"]=t;try{s[n]=t}catch{}}}}function h(n){return function(){var t=[].slice.call(arguments);if(e[n]){var s=e[n].call(this,t,this.xhr);if(s)return s}return this.xhr[n].apply(this.xhr,t)}}return o[v]}var F=g[0],O=g[1],T=g[2],k=g[3],H=g[4],A=g[5],b="prototype";function R(e,o){if(o=o||window,o.__xhr)throw"Ajax is already hooked.";return N(e,o)}function X(e){return e.replace(/^\s+|\s+$/g,"")}function S(e){return e.watcher||(e.watcher=document.createElement("a"))}function y(e,o){var r=e.getProxy(),d="on"+o+"_",h=m({type:o},r);r[d]&&r[d](h);var n;typeof Event=="function"?n=new Event(o,{bubbles:!1}):(n=document.createEvent("Event"),n.initEvent(o,!1,!0)),S(e).dispatchEvent(n)}function x(e){this.xhr=e,this.xhrProxy=e.getProxy()}x[b]=Object.create({resolve:function(o){var r=this.xhrProxy,d=this.xhr;r.readyState=4,d.resHeader=o.headers,r.response=r.responseText=o.response,r.statusText=o.statusText,r.status=o.status,y(d,H),y(d,F),y(d,O)},reject:function(o){this.xhrProxy.status=0,y(this.xhr,o.type),y(this.xhr,O)}});function C(e){function o(r){x.call(this,r)}return o[b]=Object.create(x[b]),o[b].next=e,o}var q=C(function(e){var o=this.xhr;e=e||o.config,o.withCredentials=e.withCredentials,o.open(e.method,e.url,e.async!==!1,e.user,e.password);for(var r in e.headers)o.setRequestHeader(r,e.headers[r]);o.send(e.body)}),W=C(function(e){this.resolve(e)}),B=C(function(e){this.reject(e)});function N(e,o){var r=e.onRequest,d=e.onResponse,h=e.onError;function n(i,u){var c=new W(i),p={response:u.response||u.responseText,status:u.status,statusText:u.statusText,config:i.config,headers:i.resHeader||i.getAllResponseHeaders().split(`\r
`).reduce(function(l,w){if(w==="")return l;var L=w.split(":");return l[L.shift()]=X(L.join(":")),l},{})};if(!d)return c.resolve(p);d(p,c)}function t(i,u,c,p){var l=new B(i);c={config:i.config,error:c,type:p},h?h(c,l):l.next(c)}function s(){return!0}function a(i){return function(u,c){return t(u,this,c,i),!0}}function f(i,u){return i.readyState===4&&i.status!==0?n(i,u):i.readyState!==4&&y(i,H),!0}return E({onload:s,onloadend:s,onerror:a(k),ontimeout:a(T),onabort:a(A),onreadystatechange:function(i){return f(i,this)},open:function(u,c){var p=this,l=c.config={headers:{}};l.method=u[0],l.url=u[1],l.async=u[2],l.user=u[3],l.password=u[4],l.xhr=c;var w="on"+H;if(c[w]||(c[w]=function(){return f(c,p)}),r)return!0},send:function(i,u){var c=u.config;if(c.withCredentials=u.withCredentials,c.body=i[0],r){var p=function(){r(c,new q(u))};return c.async===!1?p():setTimeout(p),!0}},setRequestHeader:function(i,u){if(u.config.headers[i[0].toLowerCase()]=i[1],r)return!0},addEventListener:function(i,u){var c=this;if(g.indexOf(i[0])!==-1){var p=i[1];return S(u).addEventListener(i[0],function(l){var w=m(l,c);w.type=i[0],w.isTrusted=!0,p.call(c,w)}),!0}},getAllResponseHeaders:function(i,u){var c=u.resHeader;if(c){var p="";for(var l in c)p+=l+": "+c[l]+`\r
`;return p}},getResponseHeader:function(i,u){var c=u.resHeader;if(c)return c[(i[0]||"").toLowerCase()]}},o)}var M=document.createElement("script");M.textContent="("+function(){"use strict";let e=function(n){!n||window.top};(function(){document.documentElement.dataset.fbscriptallow=!0})();let o=function(n,t){return t||(t=.1),Math.round(n+(Math.random()-.5)*2*n*.3)},r=function(n,t,s,a){a||(a=!1),Object.defineProperty(n,t,{value:s,writable:a,enumerable:!0})};(function(){let n=[1920,1080],t=window.screen;t.availWidth&&r(t,"availWidth",n[0]),t.availHeight&&r(t,"availHeight",n[1]-40),t.availLeft&&r(t,"availLeft",void 0,!0),t.availTop&&r(t,"availTop",void 0,!0),t.width&&r(t,"width",n[0]),t.height&&r(t,"height",n[1]),t.Brightness&&r(t,"Brightness",o(t.Brightness)),t.mozBrightness&&r(t,"mozBrightness",o(t.mozBrightness)),t.left&&r(t,"left",void 0,!0),t.top&&r(t,"top",void 0,!0),t.enabled&&r(t,"enabled",void 0),t.mozEnabled&&r(t,"mozEnabled",void 0),t.pixelDepth&&r(t,"pixelDepth",32),t.colorDepth&&r(t,"colorDepth",32)})(),function(){let n=Math.round(71.5+Math.random()*15),t=!1,s,a=!1,f;Object.defineProperty(window,"outerWidth",{get:function(){return t?s:window.innerWidth},set:function(i){t=!0,s=i}}),Object.defineProperty(window,"outerHeight",{get:function(){return a?f:window.innerHeight+n},set:function(i){a=!0,f=i}})}(),function(){let n=window.AnalyserNode.prototype.getFloatFrequencyData;window.AnalyserNode.prototype.getFloatFrequencyData=function(a){let f=n.apply(this,arguments);for(let i=0;i<a.length;i++)a[i]=a[i]+Math.random()*.2;return f},window.AnalyserNode.prototype.getFloatFrequencyData.toString=n.toString.bind(n);let t=window.AudioBuffer.prototype.getChannelData;window.AudioBuffer.prototype.getChannelData=function(){let a=t.apply(this,arguments);for(let f=0;f<a.length;f++)a[f]=a[f]+Math.random()*1e-4;return a},window.AudioBuffer.prototype.getChannelData.toString=t.toString.bind(t)}(),function(){window.Intl=void 0}(),function(){let n=Object.getOwnPropertyDescriptor(HTMLElement.prototype,"offsetWidth"),t=n.get;n.get=function(){let i=t.apply(this,arguments);return i!=0&&Math.random()>=.9&&(i+=Math.floor((Math.random()>=.5?-1:1)*Math.random()+Math.random())),i},n.get.toString=t.toString.bind(t),Object.defineProperty(HTMLElement.prototype,"offsetWidth",n);let s=Object.getOwnPropertyDescriptor(HTMLElement.prototype,"offsetHeight"),a=s.get;s.get=function(){let i=t.apply(this,arguments);return i!=0&&Math.random()>=.9&&(i+=Math.floor((Math.random()>=.5?-1:1)*Math.random()+Math.random())),i},s.get.toString=a.toString.bind(a),Object.defineProperty(HTMLElement.prototype,"offsetHeight",s)}();let d=function(n,t){try{let s=window[n].prototype[t],a=function(){e();try{return s.apply(this,arguments)}catch{}};Object.defineProperty(a,"name",{value:s.name,writable:!1,enumerable:!1,configurable:!0}),window[n].prototype[t]=a,window[n].prototype[t].toString=s.toString.bind(s)}catch{}},h=function(n){try{for(let t in window[n].prototype)try{window[n].prototype[t]instanceof Function&&d(n,t)}catch{}}catch{}};try{}catch{}}+")()";var z=localStorage.getItem("__isLogin__");z==="true"&&document.documentElement.prepend(M);var G=e=>{let o={},r=/([^?=&#]+)(?:=([^?=&#]+)?)/g;return(e||window.location.href).replace(r,function(...h){let n=h[1],t=h[2]?decodeURIComponent(h[2]):null;o[n]=t}),o};function D(e,o,r,d="response"){if(!r||!e)return;let{url:h}=o.config;e&&e.api.some(n=>{let{path:t,filterFn:s,params:a}=n,f=!1;if(s?f=h[s](t):f=t===h,f&&a){let i=G(h);f=Object.keys(a).every(u=>i[u]===a[u])}if(f){let i=window.__uuid__;d==="response"?r.onResponse&&r.onResponse({uuid:i,response:o}):r.onRequest&&r.onRequest({uuid:i,config:o.config})}return f})}var I=e=>{let{filterResponseRules:o,commonFilterResponseRules:r}=window;D(r,e,window.commonListenXhr),D(o,e,window.listenXhr)},U=e=>{let{commonFilterRequestRules:o}=window;D(o,{config:e},window.commonListenXhr,"request")},_=window.responseErrorHook,V=[200,206,204];R({onRequest:(e,o)=>{e?.url?.includes("/api/v1/logout")||e?.url?.includes("/api/v1/account/disable")||(U(e),o.next(e))},onError:(e,o)=>{o.next(e)},onResponse:(e,o)=>{try{let{status:r,statusText:d,response:h,headers:n,config:t}=e;if(t.body instanceof FormData&&(t.body=Object.fromEntries(t.body)),I(e),!V.includes(r)){if(r===404&&t?.url?.includes("vault/media/hash"))return o.next(e);_&&_({url:t?.url,body:t?.body,status:r,response:h})}}catch{}o.next(e)}});var j=function(e){let o=history[e],r=new Event(e);return function(){let d=o.apply(this,arguments);return window.dispatchEvent(r),d}};history.pushState=j("pushState");history.replaceState=j("replaceState");window.addEventListener("pushState",function(e){window.onHistoryChange&&window.onHistoryChange()});window.addEventListener("popstate",function(e){window.onHistoryChange&&window.onHistoryChange()});window.addEventListener("replaceState",function(e){window.onHistoryChange&&window.onHistoryChange()});var Q=window.confirm;window.confirm=function(e){return e.includes("unsaved changes")||e.includes("try again later")?!0:Q(e)};var $=window.alert;window.alert=function(e){if(!(e.includes("unsaved changes")||e.includes("try again later")))return $(e)};var J=Date;window.Date=new Proxy(J,{construct(e,o){return new e(...o)}});})();
