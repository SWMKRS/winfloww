(()=>{var a="commonListenApiWs",_=o=>{let n=window[a];if(!n)return;if(!0)try{let e=JSON.parse(o),t=window.__uuid__;n.onWsMessage&&n.onWsMessage({uuid:t,message:e})}catch(e){}},d=new Proxy(window.WebSocket,{construct:function(o,n){let r=n[0];if(window.__ws_url__){let[s,i]=window.__ws_url__.split("|"),w=window.btoa(`${i}|${r}`);n[0]=`${s}/${w}`}let e=new o(...n),t=s=>{_(s.data)},c=s=>{window.__ws_url__&&Object.defineProperty(s.target,"url",{value:r,writable:!1}),e.removeEventListener("message",t),e.removeEventListener("close",c)};return e.addEventListener("message",t),e.addEventListener("close",c),e.addEventListener("open",s=>{}),e}});window.WebSocket=d;})();
