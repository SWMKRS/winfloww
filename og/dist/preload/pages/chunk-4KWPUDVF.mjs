import{a as ei,b as ti}from"./chunk-MDTOMF5B.mjs";import{b as C}from"./chunk-3RV33U4O.mjs";var So=C(Je=>{"use strict";ei();var Es=ti(),bo=60103;Je.Fragment=60107;typeof Symbol=="function"&&Symbol.for&&(Nr=Symbol.for,bo=Nr("react.element"),Je.Fragment=Nr("react.fragment"));var Nr,Ts=Es.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,_s=Object.prototype.hasOwnProperty,Cs={key:!0,ref:!0,__self:!0,__source:!0};function ho(e,t,r){var n,o={},i=null,a=null;r!==void 0&&(i=""+r),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(a=t.ref);for(n in t)_s.call(t,n)&&!Cs.hasOwnProperty(n)&&(o[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)o[n]===void 0&&(o[n]=t[n]);return{$$typeof:bo,type:e,key:i,ref:a,props:o,_owner:Ts.current}}Je.jsx=ho;Je.jsxs=ho});var Os=C((rg,yo)=>{"use strict";yo.exports=So()});var Is=C((ng,Nt)=>{(function(){"use strict";var e={}.hasOwnProperty;function t(){for(var r=[],n=0;n<arguments.length;n++){var o=arguments[n];if(!!o){var i=typeof o;if(i==="string"||i==="number")r.push(o);else if(Array.isArray(o)){if(o.length){var a=t.apply(null,o);a&&r.push(a)}}else if(i==="object")if(o.toString===Object.prototype.toString)for(var u in o)e.call(o,u)&&o[u]&&r.push(u);else r.push(o.toString())}}return r.join(" ")}typeof Nt<"u"&&Nt.exports?(t.default=t,Nt.exports=t):typeof define=="function"&&typeof define.amd=="object"&&define.amd?define("classnames",[],function(){return t}):window.classNames=t})()});var Ut=C((og,xo)=>{function Ls(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}xo.exports=Ls});var To=C((ig,Eo)=>{var Rs=typeof global=="object"&&global&&global.Object===Object&&global;Eo.exports=Rs});var Ur=C((ag,_o)=>{var ws=To(),As=typeof self=="object"&&self&&self.Object===Object&&self,ks=ws||As||Function("return this")();_o.exports=ks});var Oo=C((sg,Co)=>{var Ns=Ur(),Us=function(){return Ns.Date.now()};Co.exports=Us});var Lo=C((ug,Io)=>{var Ps=/\s/;function Bs(e){for(var t=e.length;t--&&Ps.test(e.charAt(t)););return t}Io.exports=Bs});var wo=C((cg,Ro)=>{var Ms=Lo(),Ds=/^\s+/;function js(e){return e&&e.slice(0,Ms(e)+1).replace(Ds,"")}Ro.exports=js});var Pr=C((fg,Ao)=>{var Fs=Ur(),Gs=Fs.Symbol;Ao.exports=Gs});var Po=C((lg,Uo)=>{var ko=Pr(),No=Object.prototype,Hs=No.hasOwnProperty,qs=No.toString,Xe=ko?ko.toStringTag:void 0;function Ys(e){var t=Hs.call(e,Xe),r=e[Xe];try{e[Xe]=void 0;var n=!0}catch{}var o=qs.call(e);return n&&(t?e[Xe]=r:delete e[Xe]),o}Uo.exports=Ys});var Mo=C((pg,Bo)=>{var Ks=Object.prototype,zs=Ks.toString;function Ws(e){return zs.call(e)}Bo.exports=Ws});var Go=C((dg,Fo)=>{var Do=Pr(),Js=Po(),Xs=Mo(),Vs="[object Null]",$s="[object Undefined]",jo=Do?Do.toStringTag:void 0;function Zs(e){return e==null?e===void 0?$s:Vs:jo&&jo in Object(e)?Js(e):Xs(e)}Fo.exports=Zs});var qo=C((mg,Ho)=>{function Qs(e){return e!=null&&typeof e=="object"}Ho.exports=Qs});var Ko=C((vg,Yo)=>{var eu=Go(),tu=qo(),ru="[object Symbol]";function nu(e){return typeof e=="symbol"||tu(e)&&eu(e)==ru}Yo.exports=nu});var Xo=C((gg,Jo)=>{var ou=wo(),zo=Ut(),iu=Ko(),Wo=0/0,au=/^[-+]0x[0-9a-f]+$/i,su=/^0b[01]+$/i,uu=/^0o[0-7]+$/i,cu=parseInt;function fu(e){if(typeof e=="number")return e;if(iu(e))return Wo;if(zo(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=zo(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=ou(e);var r=su.test(e);return r||uu.test(e)?cu(e.slice(2),r?2:8):au.test(e)?Wo:+e}Jo.exports=fu});var Zo=C((bg,$o)=>{var lu=Ut(),Br=Oo(),Vo=Xo(),pu="Expected a function",du=Math.max,mu=Math.min;function vu(e,t,r){var n,o,i,a,u,c,s=0,f=!1,l=!1,p=!0;if(typeof e!="function")throw new TypeError(pu);t=Vo(t)||0,lu(r)&&(f=!!r.leading,l="maxWait"in r,i=l?du(Vo(r.maxWait)||0,t):i,p="trailing"in r?!!r.trailing:p);function b(y){var d=n,U=o;return n=o=void 0,s=y,a=e.apply(U,d),a}function R(y){return s=y,u=setTimeout(T,t),f?b(y):a}function v(y){var d=y-c,U=y-s,se=t-d;return l?mu(se,i-U):se}function O(y){var d=y-c,U=y-s;return c===void 0||d>=t||d<0||l&&U>=i}function T(){var y=Br();if(O(y))return Z(y);u=setTimeout(T,v(y))}function Z(y){return u=void 0,p&&n?b(y):(n=o=void 0,a)}function Pt(){u!==void 0&&clearTimeout(u),s=0,n=c=o=u=void 0}function Bt(){return u===void 0?a:Z(Br())}function Ae(){var y=Br(),d=O(y);if(n=arguments,o=this,c=y,d){if(u===void 0)return R(c);if(l)return clearTimeout(u),u=setTimeout(T,t),b(c)}return u===void 0&&(u=setTimeout(T,t)),a}return Ae.cancel=Pt,Ae.flush=Bt,Ae}$o.exports=vu});var yu=C((hg,Qo)=>{var gu=Zo(),bu=Ut(),hu="Expected a function";function Su(e,t,r){var n=!0,o=!0;if(typeof e!="function")throw new TypeError(hu);return bu(r)&&(n="leading"in r?!!r.leading:n,o="trailing"in r?!!r.trailing:o),gu(e,t,{leading:n,maxWait:t,trailing:o})}Qo.exports=Su});var I={log:"log",debug:"debug",info:"info",warn:"warn",error:"error"},B=console,ne={};Object.keys(I).forEach(function(e){ne[e]=B[e]});var ke="Datadog Browser SDK:",h={debug:ne.debug.bind(B,ke),log:ne.log.bind(B,ke),info:ne.info.bind(B,ke),warn:ne.warn.bind(B,ke),error:ne.error.bind(B,ke)};function Ve(e,t){return function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];try{return e.apply(void 0,r)}catch(o){h.error(t,o)}}}var oe;(function(e){e.PAGEHIDE="pagehide",e.FEATURE_FLAGS="feature_flags",e.RESOURCE_PAGE_STATES="resource_page_states",e.COLLECT_FLUSH_REASON="collect_flush_reason",e.ZERO_LCP_TELEMETRY="zero_lcp_telemetry",e.DISABLE_REPLAY_INLINE_CSS="disable_replay_inline_css",e.WRITABLE_RESOURCE_GRAPHQL="writable_resource_graphql",e.CUSTOM_VITALS="custom_vitals"})(oe||(oe={}));var Mt=new Set;function Dr(e){e.forEach(function(t){Mt.add(t)})}function $e(e){return Mt.has(e)}function jr(){return Mt}function Ne(e){return e!==0&&Math.random()*100<=e}function Ze(e){return ri(e)&&e>=0&&e<=100}function ri(e){return typeof e=="number"}var Q=1e3,P=60*Q,jt=60*P,ni=24*jt,Ou=365*ni;function ue(){return new Date().getTime()}function w(){return ue()}function de(){return performance.now()}function M(){return{relative:de(),timeStamp:w()}}function Fr(){return{relative:0,timeStamp:Yr()}}function Gr(e,t){return t-e}function Hr(e,t){return e+t}function qr(e){return e-Yr()}var Dt;function Yr(){return Dt===void 0&&(Dt=performance.timing.navigationStart),Dt}var k=1024,Ft=1024*k,oi=/[^\u0000-\u007F]/;function me(e){return oi.test(e)?window.TextEncoder!==void 0?new TextEncoder().encode(e).length:new Blob([e]).size:e.length}function D(e,t){return e.indexOf(t)!==-1}function ve(e){if(Array.from)return Array.from(e);var t=[];if(e instanceof Set)e.forEach(function(n){return t.push(n)});else for(var r=0;r<e.length;r++)t.push(e[r]);return t}function Kr(e,t){for(var r=0;r<e.length;r+=1){var n=e[r];if(t(n,r))return n}}function z(e){return Object.keys(e).map(function(t){return e[t]})}function zr(e){return Object.keys(e).map(function(t){return[t,e[t]]})}function ge(e,t){return e.slice(0,t.length)===t}function Wr(e,t){return e.slice(-t.length)===t}function x(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return t.forEach(function(n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}),e}function Jr(e){return x({},e)}function Gt(e,t){return Object.keys(e).some(function(r){return e[r]===t})}function be(e){return Object.keys(e).length===0}function j(){if(typeof globalThis=="object")return globalThis;Object.defineProperty(Object.prototype,"_dd_temp_",{get:function(){return this},configurable:!0});var e=_dd_temp_;return delete Object.prototype._dd_temp_,typeof e!="object"&&(typeof self=="object"?e=self:typeof window=="object"?e=window:e={}),e}function ie(e,t){var r=j(),n;return r.Zone&&typeof r.Zone.__symbol__=="function"&&(n=e[r.Zone.__symbol__(t)]),n||(n=e[t]),n}var ii=function(e,t,r){if(r||arguments.length===2)for(var n=0,o=t.length,i;n<o;n++)(i||!(n in t))&&(i||(i=Array.prototype.slice.call(t,0,n)),i[n]=t[n]);return e.concat(i||Array.prototype.slice.call(t))},Qe,Xr=!1;function Vr(e){Qe=e}function Ht(e){Xr=e}function qt(e,t,r){var n=r.value;r.value=function(){for(var o=[],i=0;i<arguments.length;i++)o[i]=arguments[i];var a=Qe?m(n):n;return a.apply(this,o)}}function m(e){return function(){return ee(e,this,arguments)}}function ee(e,t,r){try{return e.apply(t,r)}catch(n){if(et(n),Qe)try{Qe(n)}catch(o){et(o)}}}function et(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];Xr&&h.error.apply(h,ii(["[MONITOR]"],e,!1))}function W(e,t){return ie(j(),"setTimeout")(m(e),t)}function tt(e){ie(j(),"clearTimeout")(e)}function he(e,t){return ie(j(),"setInterval")(m(e),t)}function Se(e){ie(j(),"clearInterval")(e)}var g=function(){function e(t){this.onFirstSubscribe=t,this.observers=[]}return e.prototype.subscribe=function(t){var r=this;return!this.observers.length&&this.onFirstSubscribe&&(this.onLastUnsubscribe=this.onFirstSubscribe(this)||void 0),this.observers.push(t),{unsubscribe:function(){r.observers=r.observers.filter(function(n){return t!==n}),!r.observers.length&&r.onLastUnsubscribe&&r.onLastUnsubscribe()}}},e.prototype.notify=function(t){this.observers.forEach(function(r){return r(t)})},e}();function rt(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return new g(function(r){var n=e.map(function(o){return o.subscribe(function(i){return r.notify(i)})});return function(){return n.forEach(function(o){return o.unsubscribe()})}})}function nt(e,t,r){var n=r&&r.leading!==void 0?r.leading:!0,o=r&&r.trailing!==void 0?r.trailing:!0,i=!1,a,u;return{throttled:function(){for(var c=[],s=0;s<arguments.length;s++)c[s]=arguments[s];if(i){a=c;return}n?e.apply(void 0,c):a=c,i=!0,u=W(function(){o&&a&&e.apply(void 0,a),i=!1,a=void 0},t)},cancel:function(){tt(u),i=!1,a=void 0}}}function A(){}function F(e){return e?(parseInt(e,10)^Math.random()*16>>parseInt(e,10)/4).toString(16):"".concat(1e7,"-").concat(1e3,"-").concat(4e3,"-").concat(8e3,"-").concat(1e11).replace(/[018]/g,F)}var ot=/([\w-]+)\s*=\s*([^;]+)/g;function $r(e,t){for(ot.lastIndex=0;;){var r=ot.exec(e);if(r){if(r[1]===t)return r[2]}else break}}function Zr(e){var t=new Map;for(ot.lastIndex=0;;){var r=ot.exec(e);if(r)t.set(r[1],r[2]);else break}return t}function Qr(e,t,r){r===void 0&&(r="");var n=e.charCodeAt(t-1),o=n>=55296&&n<=56319,i=o?t+1:t;return e.length<=i?e:"".concat(e.slice(0,i)).concat(r)}var it=4*jt,at=15*P;function en(){return ai()===1}var st;function ai(){return st??(st=si())}function si(e){var t;e===void 0&&(e=window);var r=e.navigator.userAgent;return e.chrome||/HeadlessChrome/.test(r)?1:((t=e.navigator.vendor)===null||t===void 0?void 0:t.indexOf("Apple"))===0||/safari/i.test(r)&&!/chrome|android/i.test(r)?2:e.document.documentMode?0:3}function Ue(e,t,r,n){var o=new Date;o.setTime(o.getTime()+r);var i="expires=".concat(o.toUTCString()),a=n&&n.crossSite?"none":"strict",u=n&&n.domain?";domain=".concat(n.domain):"",c=n&&n.secure?";secure":"",s=n&&n.partitioned?";partitioned":"";document.cookie="".concat(e,"=").concat(t,";").concat(i,";path=/;samesite=").concat(a).concat(u).concat(c).concat(s)}function ut(e){return $r(document.cookie,e)}var Yt;function te(e){return Yt||(Yt=Zr(document.cookie)),Yt.get(e)}function ct(e,t){Ue(e,"",0,t)}function tn(e){if(document.cookie===void 0||document.cookie===null)return!1;try{var t="dd_cookie_test_".concat(F()),r="test";Ue(t,r,P,e);var n=ut(t)===r;return ct(t,e),n}catch(o){return h.error(o),!1}}var Kt;function rn(){if(Kt===void 0){for(var e="dd_site_test_".concat(F()),t="test",r=window.location.hostname.split("."),n=r.pop();r.length&&!ut(e);)n="".concat(r.pop(),".").concat(n),Ue(e,t,Q,{domain:n});ct(e,{domain:n}),Kt=n}return Kt}var J="_dd_s";var nn=/^([a-z]+)=([a-z0-9-]+)$/,zt="&";function Pe(e){return be(e)}function ft(e){e.expire=String(ue()+at)}function lt(e){return zr(e).map(function(t){var r=t[0],n=t[1];return"".concat(r,"=").concat(n)}).join(zt)}function pt(e){var t={};return ui(e)&&e.split(zt).forEach(function(r){var n=nn.exec(r);if(n!==null){var o=n[1],i=n[2];t[o]=i}}),t}function ui(e){return!!e&&(e.indexOf(zt)!==-1||nn.test(e))}var ci="_dd",fi="_dd_r",li="_dd_l",pi="rum",di="logs";function on(e){var t=te(J);if(!t){var r=te(ci),n=te(fi),o=te(li),i={};r&&(i.id=r),o&&/^[01]$/.test(o)&&(i[di]=o),n&&/^[012]$/.test(n)&&(i[pi]=n),Pe(i)||(ft(i),e.persistSession(i))}}function an(e){var t=bi(e);return tn(t)?{type:"Cookie",cookieOptions:t}:void 0}function sn(e){var t={isLockEnabled:en(),persistSession:mi(e),retrieveSession:vi,clearSession:gi(e)};return on(t),t}function mi(e){return function(t){Ue(J,lt(t),at,e)}}function vi(){var e=ut(J);return pt(e)}function gi(e){return function(){ct(J,e)}}function bi(e){var t={};return t.secure=!!e.useSecureSessionCookie||!!e.usePartitionedCrossSiteSessionCookie||!!e.useCrossSiteSessionCookie,t.crossSite=!!e.usePartitionedCrossSiteSessionCookie||!!e.useCrossSiteSessionCookie,t.partitioned=!!e.usePartitionedCrossSiteSessionCookie,e.trackSessionAcrossSubdomains&&(t.domain=rn()),t}var hi="_dd_test_";function un(){try{var e=F(),t="".concat(hi).concat(e);localStorage.setItem(t,e);var r=localStorage.getItem(t);return localStorage.removeItem(t),e===r?{type:"LocalStorage"}:void 0}catch{return}}function cn(){return{isLockEnabled:!1,persistSession:Si,retrieveSession:yi,clearSession:xi}}function Si(e){localStorage.setItem(J,lt(e))}function yi(){var e=localStorage.getItem(J);return pt(e)}function xi(){localStorage.removeItem(J)}var Ei=10,Ti=100,ln=[],mt;function ye(e,t,r){var n;r===void 0&&(r=0);var o=t.isLockEnabled,i=t.retrieveSession,a=t.persistSession,u=t.clearSession;if(mt||(mt=e),e!==mt){ln.push(e);return}if(o&&r>=Ti){fn(t);return}var c,s=i();if(o){if(s.lock){dt(e,t,r);return}if(c=F(),s.lock=c,a(s),s=i(),s.lock!==c){dt(e,t,r);return}}var f=e.process(s);if(o&&(s=i(),s.lock!==c)){dt(e,t,r);return}if(f&&(Pe(f)?u():(ft(f),a(f))),o&&!(f&&Pe(f))){if(s=i(),s.lock!==c){dt(e,t,r);return}delete s.lock,a(s),f=s}(n=e.after)===null||n===void 0||n.call(e,f||s),fn(t)}function dt(e,t,r){W(function(){ye(e,t,r+1)},Ei)}function fn(e){mt=void 0;var t=ln.shift();t&&ye(t,e)}var pn=Q;function dn(e){var t=an(e);return!t&&e.allowFallbackToLocalStorage&&(t=un()),t}function mn(e,t,r){var n=new g,o=new g,i=e.type==="Cookie"?sn(e.cookieOptions):cn(),a=i.clearSession,u=i.retrieveSession,c=he(R,pn),s=Ae(),f=nt(function(){var d;ye({process:function(U){var se=v(U);return d=O(se),se},after:function(U){d&&!T()&&Bt(U),s=U}},i)},pn),l=f.throttled,p=f.cancel;function b(){ye({process:function(d){return T()?v(d):void 0}},i)}function R(){ye({process:function(d){return y(d)?void 0:{}},after:v},i)}function v(d){return y(d)||(d={}),T()&&(Z(d)?Pt():s=d),d}function O(d){var U=r(d[t]),se=U.trackingType,Mr=U.isTracked;return d[t]=se,Mr&&!d.id&&(d.id=F(),d.created=String(ue())),Mr}function T(){return s[t]!==void 0}function Z(d){return s.id!==d.id||s[t]!==d[t]}function Pt(){s={},o.notify()}function Bt(d){s=d,n.notify()}function Ae(){var d=u();return y(d)?d:{}}function y(d){return(d.created===void 0||ue()-Number(d.created)<it)&&(d.expire===void 0||ue()<Number(d.expire))}return{expandOrRenewSession:l,expandSession:b,getSession:function(){return s},renewObservable:n,expireObservable:o,expire:function(){p(),a(),v({})},stop:function(){Se(c)}}}var Be={GRANTED:"granted",NOT_GRANTED:"not-granted"};function Wt(e){var t=new g;return{tryToInit:function(r){e||(e=r)},update:function(r){e=r,t.notify()},isGranted:function(){return e===Be.GRANTED},observable:t}}function G(e,t,r){if(typeof e!="object"||e===null)return JSON.stringify(e);var n=ce(Object.prototype),o=ce(Array.prototype),i=ce(Object.getPrototypeOf(e)),a=ce(e);try{return JSON.stringify(e,t,r)}catch{return"<error: unable to serialize object>"}finally{n(),o(),i(),a()}}function ce(e){var t=e,r=t.toJSON;return r?(delete t.toJSON,function(){t.toJSON=r}):A}function xe(e){return _i(e,location.href).href}function _i(e,t){var r=Ci();if(r)try{return t!==void 0?new r(e,t):new r(e)}catch(a){throw new Error("Failed to construct URL: ".concat(String(a)," ").concat(G({url:e,base:t})))}if(t===void 0&&!/:/.test(e))throw new Error("Invalid URL: '".concat(e,"'"));var n=document,o=n.createElement("a");if(t!==void 0){n=document.implementation.createHTMLDocument("");var i=n.createElement("base");i.href=t,n.head.appendChild(i),n.body.appendChild(o)}return o.href=e,o}var vn=URL,vt;function Ci(){if(vt===void 0)try{var e=new vn("http://test/path");vt=e.href==="http://test/path"}catch{vt=!1}return vt?vn:void 0}var Jt="datad0g.com",gn="dd0g-gov.com",X="datadoghq.com";var Xt="ddog-gov.com",gt="pci.browser-intake-datadoghq.com";function Ee(e,t,r){var n=Oi(e,t);return{build:function(o,i){var a=Li(e,t,r,o,i);return n(a)},urlPrefix:n(""),trackType:t}}function Oi(e,t){var r="/api/v2/".concat(t),n=e.proxy;if(typeof n=="string"){var o=xe(n);return function(a){return"".concat(o,"?ddforward=").concat(encodeURIComponent("".concat(r,"?").concat(a)))}}if(typeof n=="function")return function(a){return n({path:r,parameters:a})};var i=Ii(t,e);return function(a){return"https://".concat(i).concat(r,"?").concat(a)}}function Ii(e,t){var r=t.site,n=r===void 0?X:r,o=t.internalAnalyticsSubdomain;if(e==="logs"&&t.usePciIntake&&n===X)return gt;if(o&&n===X)return"".concat(o,".").concat(X);if(n===gn)return"http-intake.logs.".concat(n);var i=n.split("."),a=i.pop();return"browser-intake-".concat(i.join("-"),".").concat(a)}function Li(e,t,r,n,o){var i=e.clientToken,a=e.internalAnalyticsSubdomain,u=o.retry,c=o.flushReason,s=o.encoding,f=["sdk_version:".concat("5.13.0"),"api:".concat(n)].concat(r);c&&$e(oe.COLLECT_FLUSH_REASON)&&f.push("flush_reason:".concat(c)),u&&f.push("retry_count:".concat(u.count),"retry_after:".concat(u.lastFailureStatus));var l=["ddsource=browser","ddtags=".concat(encodeURIComponent(f.join(","))),"dd-api-key=".concat(i),"dd-evp-origin-version=".concat(encodeURIComponent("5.13.0")),"dd-evp-origin=browser","dd-request-id=".concat(F())];return s&&l.push("dd-evp-encoding=".concat(s)),t==="rum"&&l.push("batch_time=".concat(w())),a&&l.reverse(),l.join("&")}var Ri=200;function bn(e){var t=e.env,r=e.service,n=e.version,o=e.datacenter,i=[];return t&&i.push(bt("env",t)),r&&i.push(bt("service",r)),n&&i.push(bt("version",n)),o&&i.push(bt("datacenter",o)),i}var wi=/[^a-z0-9_:./-]/;function bt(e,t){var r=Ri-e.length-1;(t.length>r||wi.test(t))&&h.warn("".concat(e," value doesn't meet tag requirements and will be sanitized"));var n=t.replace(/,/g,"_");return"".concat(e,":").concat(n)}function hn(e){var t=e.site||X,r=bn(e),n=Ai(e,r),o=Ni(n,t),i=ki(e,o,r);return x({isIntakeUrl:function(a){return o.some(function(u){return a.indexOf(u)===0})},replica:i,site:t},n)}function Ai(e,t){return{logsEndpointBuilder:Ee(e,"logs",t),rumEndpointBuilder:Ee(e,"rum",t),sessionReplayEndpointBuilder:Ee(e,"replay",t)}}function ki(e,t,r){if(!!e.replica){var n=x({},e,{site:X,clientToken:e.replica.clientToken}),o={logsEndpointBuilder:Ee(n,"logs",r),rumEndpointBuilder:Ee(n,"rum",r)};return t.push.apply(t,z(o).map(function(i){return i.urlPrefix})),x({applicationId:e.replica.applicationId},o)}}function Ni(e,t){var r=z(e).map(function(n){return n.urlPrefix});return t===X&&r.push("https://".concat(gt,"/")),r}function ht(e){var t,r,n,o;if(!e||!e.clientToken){h.error("Client Token is not configured, we will not send any data.");return}if(e.sessionSampleRate!==void 0&&!Ze(e.sessionSampleRate)){h.error("Session Sample Rate should be a number between 0 and 100");return}if(e.telemetrySampleRate!==void 0&&!Ze(e.telemetrySampleRate)){h.error("Telemetry Sample Rate should be a number between 0 and 100");return}if(e.telemetryConfigurationSampleRate!==void 0&&!Ze(e.telemetryConfigurationSampleRate)){h.error("Telemetry Configuration Sample Rate should be a number between 0 and 100");return}if(e.trackingConsent!==void 0&&!Gt(Be,e.trackingConsent)){h.error('Tracking Consent should be either "granted" or "not-granted"');return}return Array.isArray(e.enableExperimentalFeatures)&&Dr(e.enableExperimentalFeatures.filter(function(i){return Gt(oe,i)})),x({beforeSend:e.beforeSend&&Ve(e.beforeSend,"beforeSend threw an error:"),sessionStoreStrategyType:dn(e),sessionSampleRate:(t=e.sessionSampleRate)!==null&&t!==void 0?t:100,telemetrySampleRate:(r=e.telemetrySampleRate)!==null&&r!==void 0?r:20,telemetryConfigurationSampleRate:(n=e.telemetryConfigurationSampleRate)!==null&&n!==void 0?n:5,service:e.service,silentMultipleInit:!!e.silentMultipleInit,allowUntrustedEvents:!!e.allowUntrustedEvents,trackingConsent:(o=e.trackingConsent)!==null&&o!==void 0?o:Be.GRANTED,batchBytesLimit:16*k,eventRateLimiterThreshold:3e3,maxTelemetryEventsPerPage:15,flushTimeout:30*Q,batchMessagesLimit:50,messageBytesLimit:256*k},hn(e))}function St(e){return{session_sample_rate:e.sessionSampleRate,telemetry_sample_rate:e.telemetrySampleRate,telemetry_configuration_sample_rate:e.telemetryConfigurationSampleRate,use_before_send:!!e.beforeSend,use_cross_site_session_cookie:e.useCrossSiteSessionCookie,use_partitioned_cross_site_session_cookie:e.usePartitionedCrossSiteSessionCookie,use_secure_session_cookie:e.useSecureSessionCookie,use_proxy:!!e.proxy,silent_multiple_init:e.silentMultipleInit,track_session_across_subdomains:e.trackSessionAcrossSubdomains,allow_fallback_to_local_storage:!!e.allowFallbackToLocalStorage,store_contexts_across_pages:!!e.storeContextsAcrossPages,allow_untrusted_events:!!e.allowUntrustedEvents,tracking_consent:e.trackingConsent}}function V(e,t,r){var n=e[t];if(typeof n!="function")if(ge(t,"on"))n=A;else return{stop:A};var o=Bi(n,r),i=function(){if(typeof o=="function")return o.apply(this,arguments)};return e[t]=i,{stop:function(){e[t]===i?e[t]=n:o=n}}}function Bi(e,t){return function(){var r=ve(arguments),n;ee(t,null,[{target:this,parameters:r,onPostCall:function(i){n=i}}]);var o=e.apply(this,r);return n&&ee(n,null,[o]),o}}var Me="?";function L(e){var t=[],r=Vt(e,"stack"),n=String(e);return r&&ge(r,n)&&(r=r.slice(n.length)),r&&r.split(`
`).forEach(function(o){var i=ji(o)||Gi(o)||qi(o)||zi(o);i&&(!i.func&&i.line&&(i.func=Me),t.push(i))}),{message:Vt(e,"message"),name:Vt(e,"name"),stack:t}}var Sn="((?:file|https?|blob|chrome-extension|native|eval|webpack|snippet|<anonymous>|\\w+\\.|\\/).*?)",Te="(?::(\\d+))",Mi=new RegExp("^\\s*at (.*?) ?\\(".concat(Sn).concat(Te,"?").concat(Te,"?\\)?\\s*$"),"i"),Di=new RegExp("\\((\\S*)".concat(Te).concat(Te,"\\)"));function ji(e){var t=Mi.exec(e);if(!!t){var r=t[2]&&t[2].indexOf("native")===0,n=t[2]&&t[2].indexOf("eval")===0,o=Di.exec(t[2]);return n&&o&&(t[2]=o[1],t[3]=o[2],t[4]=o[3]),{args:r?[t[2]]:[],column:t[4]?+t[4]:void 0,func:t[1]||Me,line:t[3]?+t[3]:void 0,url:r?void 0:t[2]}}}var Fi=new RegExp("^\\s*at ?".concat(Sn).concat(Te,"?").concat(Te,"??\\s*$"),"i");function Gi(e){var t=Fi.exec(e);if(!!t)return{args:[],column:t[3]?+t[3]:void 0,func:Me,line:t[2]?+t[2]:void 0,url:t[1]}}var Hi=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:file|ms-appx|https?|webpack|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i;function qi(e){var t=Hi.exec(e);if(!!t)return{args:[],column:t[4]?+t[4]:void 0,func:t[1]||Me,line:+t[3],url:t[2]}}var Yi=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)((?:file|https?|blob|chrome|webpack|resource|capacitor|\[native).*?|[^@]*bundle)(?::(\d+))?(?::(\d+))?\s*$/i,Ki=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i;function zi(e){var t=Yi.exec(e);if(!!t){var r=t[3]&&t[3].indexOf(" > eval")>-1,n=Ki.exec(t[3]);return r&&n&&(t[3]=n[1],t[4]=n[2],t[5]=void 0),{args:t[2]?t[2].split(","):[],column:t[5]?+t[5]:void 0,func:t[1]||Me,line:t[4]?+t[4]:void 0,url:t[3]}}}function Vt(e,t){if(!(typeof e!="object"||!e||!(t in e))){var r=e[t];return typeof r=="string"?r:void 0}}function yn(e,t,r,n){var o=[{url:t,column:n,line:r}],i=Ji(e),a=i.name,u=i.message;return{name:a,message:u,stack:o}}var Wi=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?([\s\S]*)$/;function Ji(e){var t,r,n;return{}.toString.call(e)==="[object String]"&&(t=Wi.exec(e),r=t[1],n=t[2]),{name:r,message:n}}var Xi=220*k,Vi="$",$i=3;function N(e,t){var r;t===void 0&&(t=Xi);var n=ce(Object.prototype),o=ce(Array.prototype),i=[],a=new WeakMap,u=$t(e,Vi,void 0,i,a),c=((r=JSON.stringify(u))===null||r===void 0?void 0:r.length)||0;if(c>t){Zt(t,"discarded",e);return}for(;i.length>0&&c<t;){var s=i.shift(),f=0;if(Array.isArray(s.source))for(var l=0;l<s.source.length;l++){var p=$t(s.source[l],s.path,l,i,a);if(p!==void 0?c+=JSON.stringify(p).length:c+=4,c+=f,f=1,c>t){Zt(t,"truncated",e);break}s.target[l]=p}else for(var l in s.source)if(Object.prototype.hasOwnProperty.call(s.source,l)){var p=$t(s.source[l],s.path,l,i,a);if(p!==void 0&&(c+=JSON.stringify(p).length+f+l.length+$i,f=1),c>t){Zt(t,"truncated",e);break}s.target[l]=p}}return n(),o(),u}function $t(e,t,r,n,o){var i=ea(e);if(!i||typeof i!="object")return Zi(i);var a=Qi(i);if(a!=="[Object]"&&a!=="[Array]"&&a!=="[Error]")return a;var u=e;if(o.has(u))return"[Reference seen at ".concat(o.get(u),"]");var c=r!==void 0?"".concat(t,".").concat(r):t,s=Array.isArray(i)?[]:{};return o.set(u,c),n.push({source:i,target:s,path:c}),s}function Zi(e){return typeof e=="bigint"?"[BigInt] ".concat(e.toString()):typeof e=="function"?"[Function] ".concat(e.name||"unknown"):typeof e=="symbol"?"[Symbol] ".concat(e.description||e.toString()):e}function Qi(e){try{if(e instanceof Event)return{isTrusted:e.isTrusted};var t=Object.prototype.toString.call(e),r=t.match(/\[object (.*)\]/);if(r&&r[1])return"[".concat(r[1],"]")}catch{}return"[Unserializable]"}function ea(e){var t=e;if(t&&typeof t.toJSON=="function")try{return t.toJSON()}catch{}return e}function Zt(e,t,r){h.warn("The data provided has been ".concat(t," as it is over the limit of ").concat(e," characters:"),r)}var yt="No stack, consider using an instance of Error";function De(e){var t=e.stackTrace,r=e.originalError,n=e.handlingStack,o=e.startClocks,i=e.nonErrorPrefix,a=e.source,u=e.handling,c=r instanceof Error,s=ta(t,c,i,r),f=ra(c,t)?H(t):yt,l=c?nr(r,a):void 0,p=t?.name,b=Qt(r);return{startClocks:o,source:a,handling:u,handlingStack:n,originalError:r,type:p,message:s,stack:f,causes:l,fingerprint:b}}function ta(e,t,r,n){return e?.message&&e?.name?e.message:t?"Empty message":"".concat(r," ").concat(G(N(n)))}function ra(e,t){return t===void 0?!1:e?!0:t.stack.length>0&&(t.stack.length>1||t.stack[0].url!==void 0)}function Qt(e){return e instanceof Error&&"dd_fingerprint"in e?String(e.dd_fingerprint):void 0}function H(e){var t=tr(e);return e.stack.forEach(function(r){var n=r.func==="?"?"<anonymous>":r.func,o=r.args&&r.args.length>0?"(".concat(r.args.join(", "),")"):"",i=r.line?":".concat(r.line):"",a=r.line&&r.column?":".concat(r.column):"";t+=`
  at `.concat(n).concat(o," @ ").concat(r.url).concat(i).concat(a)}),t}function er(e){var t;return(t=/@ (.+)/.exec(e))===null||t===void 0?void 0:t[1]}function tr(e){return"".concat(e.name||"Error",": ").concat(e.message)}function rr(){var e=2,t=new Error,r;if(!t.stack)try{throw t}catch{}return ee(function(){var n=L(t);n.stack=n.stack.slice(e),r=H(n)}),r}function nr(e,t){for(var r=e,n=[];r?.cause instanceof Error&&n.length<10;){var o=L(r.cause);n.push({message:r.cause.message,source:t,type:o?.name,stack:o&&H(o)}),r=r.cause}return n.length?n:void 0}var E={AGENT:"agent",CONSOLE:"console",CUSTOM:"custom",LOGGER:"logger",NETWORK:"network",SOURCE:"source",REPORT:"report"};function or(e){var t=function(o,i){var a=De({stackTrace:o,originalError:i,startClocks:M(),nonErrorPrefix:"Uncaught",source:E.SOURCE,handling:"unhandled"});e.notify(a)},r=na(t).stop,n=oa(t).stop;return{stop:function(){r(),n()}}}function na(e){return V(window,"onerror",function(t){var r=t.parameters,n=r[0],o=r[1],i=r[2],a=r[3],u=r[4],c;u instanceof Error?c=L(u):c=yn(n,o,i,a),e(c,u??n)})}function oa(e){return V(window,"onunhandledrejection",function(t){var r=t.parameters[0],n=r.reason||"Empty reason",o=L(n);e(o,n)})}function ir(e){var t=x({version:"5.13.0",onReady:function(r){r()}},e);return Object.defineProperty(t,"_setDebug",{get:function(){return Ht},enumerable:!1}),t}function ar(e,t,r){var n=e[t];e[t]=r,n&&n.q&&n.q.forEach(function(o){return Ve(o,"onReady callback threw an error:")()})}function je(e,t){t.silentMultipleInit||h.error("".concat(e," is already initialized."))}var _;(function(e){e.BEFORE_UNLOAD="beforeunload",e.CLICK="click",e.DBL_CLICK="dblclick",e.KEY_DOWN="keydown",e.LOAD="load",e.POP_STATE="popstate",e.SCROLL="scroll",e.TOUCH_START="touchstart",e.TOUCH_END="touchend",e.TOUCH_MOVE="touchmove",e.VISIBILITY_CHANGE="visibilitychange",e.PAGE_SHOW="pageshow",e.FREEZE="freeze",e.RESUME="resume",e.DOM_CONTENT_LOADED="DOMContentLoaded",e.POINTER_DOWN="pointerdown",e.POINTER_UP="pointerup",e.POINTER_CANCEL="pointercancel",e.HASH_CHANGE="hashchange",e.PAGE_HIDE="pagehide",e.MOUSE_DOWN="mousedown",e.MOUSE_UP="mouseup",e.MOUSE_MOVE="mousemove",e.FOCUS="focus",e.BLUR="blur",e.CONTEXT_MENU="contextmenu",e.RESIZE="resize",e.CHANGE="change",e.INPUT="input",e.PLAY="play",e.PAUSE="pause",e.SECURITY_POLICY_VIOLATION="securitypolicyviolation",e.SELECTION_CHANGE="selectionchange",e.STORAGE="storage"})(_||(_={}));function q(e,t,r,n,o){return Fe(e,t,[r],n,o)}function Fe(e,t,r,n,o){var i=o===void 0?{}:o,a=i.once,u=i.capture,c=i.passive,s=m(function(b){!b.isTrusted&&!b.__ddIsTrusted&&!e.allowUntrustedEvents||(a&&p(),n(b))}),f=c?{capture:u,passive:c}:u,l=ie(t,"addEventListener");r.forEach(function(b){return l.call(t,b,s,f)});function p(){var b=ie(t,"removeEventListener");r.forEach(function(R){return b.call(t,R,s,f)})}return{stop:p}}var Y={intervention:"intervention",deprecation:"deprecation",cspViolation:"csp_violation"};function sr(e,t){var r=[];D(t,Y.cspViolation)&&r.push(aa(e));var n=t.filter(function(o){return o!==Y.cspViolation});return n.length&&r.push(ia(n)),rt.apply(void 0,r)}function ia(e){return new g(function(t){if(!!window.ReportingObserver){var r=m(function(o,i){return o.forEach(function(a){t.notify(sa(a))})}),n=new window.ReportingObserver(r,{types:e,buffered:!0});return n.observe(),function(){n.disconnect()}}})}function aa(e){return new g(function(t){var r=q(e,document,_.SECURITY_POLICY_VIOLATION,function(n){t.notify(ua(n))}).stop;return r})}function sa(e){var t=e.type,r=e.body;return{type:t,subtype:r.id,message:"".concat(t,": ").concat(r.message),originalReport:e,stack:xn(r.id,r.message,r.sourceFile,r.lineNumber,r.columnNumber)}}function ua(e){var t=Y.cspViolation,r="'".concat(e.blockedURI,"' blocked by '").concat(e.effectiveDirective,"' directive");return{type:Y.cspViolation,subtype:e.effectiveDirective,message:"".concat(t,": ").concat(r),stack:xn(e.effectiveDirective,e.originalPolicy?"".concat(r,' of the policy "').concat(Qr(e.originalPolicy,100,"..."),'"'):"no policy",e.sourceFile,e.lineNumber,e.columnNumber),originalReport:e}}function xn(e,t,r,n,o){return r?H({name:e,message:t,stack:[{func:"?",url:r,line:n??void 0,column:o??void 0}]}):void 0}function Ge(e,t){var r=window.__ddBrowserSdkExtensionCallback;r&&r({type:e,payload:t})}function _e(e){return e===null?"null":Array.isArray(e)?"array":typeof e}function xt(e,t,r){if(r===void 0&&(r=ca()),t===void 0)return e;if(typeof t!="object"||t===null)return t;if(t instanceof Date)return new Date(t.getTime());if(t instanceof RegExp){var n=t.flags||[t.global?"g":"",t.ignoreCase?"i":"",t.multiline?"m":"",t.sticky?"y":"",t.unicode?"u":""].join("");return new RegExp(t.source,n)}if(!r.hasAlreadyBeenSeen(t)){if(Array.isArray(t)){for(var o=Array.isArray(e)?e:[],i=0;i<t.length;++i)o[i]=xt(o[i],t[i],r);return o}var a=_e(e)==="object"?e:{};for(var u in t)Object.prototype.hasOwnProperty.call(t,u)&&(a[u]=xt(a[u],t[u],r));return a}}function Et(e){return xt(void 0,e)}function K(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var r,n=0,o=e;n<o.length;n++){var i=o[n];i!=null&&(r=xt(r,i))}return r}function ca(){if(typeof WeakSet<"u"){var e=new WeakSet;return{hasAlreadyBeenSeen:function(r){var n=e.has(r);return n||e.add(r),n}}}var t=[];return{hasAlreadyBeenSeen:function(r){var n=t.indexOf(r)>=0;return n||t.push(r),n}}}function En(){var e,t=window.navigator;return{status:t.onLine?"connected":"not_connected",interfaces:t.connection&&t.connection.type?[t.connection.type]:void 0,effective_type:(e=t.connection)===null||e===void 0?void 0:e.effectiveType}}var Tt={log:"log",configuration:"configuration"};var fa=["https://www.datadoghq-browser-agent.com","https://www.datad0g-browser-agent.com","https://d3uc069fcn7uxw.cloudfront.net","https://d20xtzwzcl0ceb.cloudfront.net","http://localhost","<anonymous>"],la=[Xt],$={maxEventsPerPage:0,sentEventCount:0,telemetryEnabled:!1,telemetryConfigurationEnabled:!1},ur;function _t(e,t){var r,n=new g;$.telemetryEnabled=!D(la,t.site)&&Ne(t.telemetrySampleRate),$.telemetryConfigurationEnabled=$.telemetryEnabled&&Ne(t.telemetryConfigurationSampleRate);var o=pa();ur=function(a){if($.telemetryEnabled){var u=i(e,a,o);n.notify(u),Ge("telemetry",u)}},Vr(He),x($,{maxEventsPerPage:t.maxTelemetryEventsPerPage,sentEventCount:0});function i(a,u,c){return K({type:"telemetry",date:w(),service:a,version:"5.13.0",source:"browser",_dd:{format_version:2},telemetry:K(u,{runtime_env:c,connectivity:En()}),experimental_features:ve(jr())},r!==void 0?r():{})}return{setContextProvider:function(a){r=a},observable:n,enabled:$.telemetryEnabled}}function pa(){return{is_local_file:window.location.protocol==="file:",is_worker:"WorkerGlobalScope"in self}}function Ct(e){return e.site===Jt}function Ce(e,t){et(I.debug,e,t),cr(x({type:Tt.log,message:e,status:"debug"},t))}function He(e,t){cr(x({type:Tt.log,status:"error"},da(e),t))}function Ot(e){$.telemetryConfigurationEnabled&&cr({type:Tt.configuration,configuration:e})}function cr(e){ur&&$.sentEventCount<$.maxEventsPerPage&&($.sentEventCount+=1,ur(e))}function da(e){if(e instanceof Error){var t=L(e);return{error:{kind:t.name,stack:H(ma(t))},message:t.message}}return{error:{stack:yt},message:"".concat("Uncaught"," ").concat(G(e))}}function ma(e){return e.stack=e.stack.filter(function(t){return!t.url||fa.some(function(r){return ge(t.url,r)})}),e}function Tn(e){var t=new Set;return e.forEach(function(r){return t.add(r)}),ve(t)}function It(e,t){var r=e.indexOf(t);r>=0&&e.splice(r,1)}var Lt=1/0,ba=P,_n=function(){function e(t,r){var n=this;this.expireDelay=t,this.maxEntries=r,this.entries=[],this.clearOldValuesInterval=he(function(){return n.clearOldValues()},ba)}return e.prototype.add=function(t,r){var n=this,o={value:t,startTime:r,endTime:Lt,remove:function(){It(n.entries,o)},close:function(i){o.endTime=i}};return this.maxEntries&&this.entries.length>=this.maxEntries&&this.entries.pop(),this.entries.unshift(o),o},e.prototype.find=function(t){t===void 0&&(t=Lt);for(var r=0,n=this.entries;r<n.length;r++){var o=n[r];if(o.startTime<=t){if(t<=o.endTime)return o.value;break}}},e.prototype.closeActive=function(t){var r=this.entries[0];r&&r.endTime===Lt&&r.close(t)},e.prototype.findAll=function(t,r){t===void 0&&(t=Lt),r===void 0&&(r=0);var n=Hr(t,r);return this.entries.filter(function(o){return o.startTime<=n&&t<=o.endTime}).map(function(o){return o.value})},e.prototype.reset=function(){this.entries=[]},e.prototype.stop=function(){Se(this.clearOldValuesInterval)},e.prototype.clearOldValues=function(){for(var t=de()-this.expireDelay;this.entries.length>0&&this.entries[this.entries.length-1].endTime<t;)this.entries.pop()},e}();var ha=P,Sa=it,qe=[];function fr(e,t,r,n){var o=new g,i=new g,a=mn(e.sessionStoreStrategyType,t,r);qe.push(function(){return a.stop()});var u=new _n(Sa);qe.push(function(){return u.stop()}),a.renewObservable.subscribe(function(){u.add(c(),de()),o.notify()}),a.expireObservable.subscribe(function(){i.notify(),u.closeActive(de())}),a.expandOrRenewSession(),u.add(c(),Fr().relative),n.observable.subscribe(function(){n.isGranted()?a.expandOrRenewSession():a.expire()}),ya(e,function(){n.isGranted()&&a.expandOrRenewSession()}),xa(e,function(){return a.expandSession()});function c(){return{id:a.getSession().id,trackingType:a.getSession()[t]}}return{findActiveSession:function(s){return u.find(s)},renewObservable:o,expireObservable:i,expire:a.expire}}function ya(e,t){var r=Fe(e,window,[_.CLICK,_.TOUCH_START,_.KEY_DOWN,_.SCROLL],t,{capture:!0,passive:!0}).stop;qe.push(r)}function xa(e,t){var r=function(){document.visibilityState==="visible"&&t()},n=q(e,document,_.VISIBILITY_CHANGE,r).stop;qe.push(n);var o=he(r,ha);qe.push(function(){Se(o)})}function Rt(e){return e>=500}function Cn(e){try{return e.clone()}catch{return}}var Ea=80*k,Ta=32,On=3*Ft,_a=P,In=Q;function lr(e,t,r,n,o){t.transportStatus===0&&t.queuedPayloads.size()===0&&t.bandwidthMonitor.canHandle(e)?Rn(e,t,r,{onSuccess:function(){return wn(0,t,r,n,o)},onFailure:function(){t.queuedPayloads.enqueue(e),Ln(t,r,n,o)}}):t.queuedPayloads.enqueue(e)}function Ln(e,t,r,n){e.transportStatus===2&&W(function(){var o=e.queuedPayloads.first();Rn(o,e,t,{onSuccess:function(){e.queuedPayloads.dequeue(),e.currentBackoffTime=In,wn(1,e,t,r,n)},onFailure:function(){e.currentBackoffTime=Math.min(_a,e.currentBackoffTime*2),Ln(e,t,r,n)}})},e.currentBackoffTime)}function Rn(e,t,r,n){var o=n.onSuccess,i=n.onFailure;t.bandwidthMonitor.add(e),r(e,function(a){t.bandwidthMonitor.remove(e),Ca(a)?(t.transportStatus=t.bandwidthMonitor.ongoingRequestCount>0?1:2,e.retry={count:e.retry?e.retry.count+1:1,lastFailureStatus:a.status},i()):(t.transportStatus=0,o())})}function wn(e,t,r,n,o){e===0&&t.queuedPayloads.isFull()&&!t.queueFullReported&&(o({message:"Reached max ".concat(n," events size queued for upload: ").concat(On/Ft,"MiB"),source:E.AGENT,startClocks:M()}),t.queueFullReported=!0);var i=t.queuedPayloads;for(t.queuedPayloads=kn();i.size()>0;)lr(i.dequeue(),t,r,n,o)}function Ca(e){return e.type!=="opaque"&&(e.status===0&&!navigator.onLine||e.status===408||e.status===429||Rt(e.status))}function An(){return{transportStatus:0,currentBackoffTime:In,bandwidthMonitor:Oa(),queuedPayloads:kn(),queueFullReported:!1}}function kn(){var e=[];return{bytesCount:0,enqueue:function(t){this.isFull()||(e.push(t),this.bytesCount+=t.bytesCount)},first:function(){return e[0]},dequeue:function(){var t=e.shift();return t&&(this.bytesCount-=t.bytesCount),t},size:function(){return e.length},isFull:function(){return this.bytesCount>=On}}}function Oa(){return{ongoingRequestCount:0,ongoingByteCount:0,canHandle:function(e){return this.ongoingRequestCount===0||this.ongoingByteCount+e.bytesCount<=Ea&&this.ongoingRequestCount<Ta},add:function(e){this.ongoingRequestCount+=1,this.ongoingByteCount+=e.bytesCount},remove:function(e){this.ongoingRequestCount-=1,this.ongoingByteCount-=e.bytesCount}}}function dr(e,t,r,n){var o=An(),i=function(a,u){return Ra(e,t,r,a,u)};return{send:function(a){lr(a,o,i,t.trackType,n)},sendOnExit:function(a){Ia(e,t,r,a)}}}function Ia(e,t,r,n){var o=!!navigator.sendBeacon&&n.bytesCount<r;if(o)try{var i=t.build("beacon",n),a=navigator.sendBeacon(i,n.data);if(a)return}catch(c){La(c)}var u=t.build("xhr",n);pr(e,u,n.data)}var Nn=!1;function La(e){Nn||(Nn=!0,He(e))}function Ra(e,t,r,n,o){var i=wa()&&n.bytesCount<r;if(i){var a=t.build("fetch",n);fetch(a,{method:"POST",body:n.data,keepalive:!0,mode:"cors"}).then(m(function(c){return o?.({status:c.status,type:c.type})}),m(function(){var c=t.build("xhr",n);pr(e,c,n.data,o)}))}else{var u=t.build("xhr",n);pr(e,u,n.data,o)}}function wa(){try{return window.Request&&"keepalive"in new Request("http://a")}catch{return!1}}function pr(e,t,r,n){var o=new XMLHttpRequest;o.open("POST",t,!0),r instanceof Blob&&o.setRequestHeader("Content-Type",r.type),q(e,o,"loadend",function(){n?.({status:o.status})},{once:!0}),o.send(r)}function fe(){var e=Aa();if(!!e)return{getCapabilities:function(){var t;return JSON.parse(((t=e.getCapabilities)===null||t===void 0?void 0:t.call(e))||"[]")},getPrivacyLevel:function(){var t;return(t=e.getPrivacyLevel)===null||t===void 0?void 0:t.call(e)},getAllowedWebViewHosts:function(){return JSON.parse(e.getAllowedWebViewHosts())},send:function(t,r,n){var o=n?{id:n}:void 0;e.send(JSON.stringify({eventType:t,event:r,view:o}))}}}function re(e){var t;e===void 0&&(e=(t=j().location)===null||t===void 0?void 0:t.hostname);var r=fe();return!!r&&r.getAllowedWebViewHosts().some(function(n){return e===n||Wr(e,".".concat(n))})}function Aa(){return j().DatadogEventBridge}var Oe={HIDDEN:"visibility_hidden",UNLOADING:"before_unload",PAGEHIDE:"page_hide",FROZEN:"page_frozen"};function mr(e){return new g(function(t){var r=$e(oe.PAGEHIDE),n=Fe(e,window,[_.VISIBILITY_CHANGE,_.FREEZE,_.PAGE_HIDE],function(i){i.type===_.PAGE_HIDE&&r?t.notify({reason:Oe.PAGEHIDE}):i.type===_.VISIBILITY_CHANGE&&document.visibilityState==="hidden"?t.notify({reason:Oe.HIDDEN}):i.type===_.FREEZE&&t.notify({reason:Oe.FROZEN})},{capture:!0}).stop,o=A;return r||(o=q(e,window,_.BEFORE_UNLOAD,function(){t.notify({reason:Oe.UNLOADING})}).stop),function(){n(),o()}})}function vr(e){return D(z(Oe),e)}var Pn=function(){function e(t,r,n,o){var i=this;this.encoder=t,this.request=r,this.flushController=n,this.messageBytesLimit=o,this.upsertBuffer={},this.flushSubscription=this.flushController.flushObservable.subscribe(function(a){return i.flush(a)})}return e.prototype.add=function(t){this.addOrUpdate(t)},e.prototype.upsert=function(t,r){this.addOrUpdate(t,r)},e.prototype.stop=function(){this.flushSubscription.unsubscribe()},e.prototype.flush=function(t){var r=z(this.upsertBuffer).join(`
`);this.upsertBuffer={};var n=vr(t.reason),o=n?this.request.sendOnExit:this.request.send;if(n&&this.encoder.isAsync){var i=this.encoder.finishSync();i.outputBytesCount&&o(Un(i,t));var a=[i.pendingData,r].filter(Boolean).join(`
`);a&&o({data:a,bytesCount:me(a),flushReason:t.reason})}else r&&this.encoder.write(this.encoder.isEmpty?r:`
`.concat(r)),this.encoder.finish(function(u){o(Un(u,t))})},e.prototype.addOrUpdate=function(t,r){var n=G(t),o=this.encoder.estimateEncodedBytesCount(n);if(o>=this.messageBytesLimit){h.warn("Discarded a message whose size was bigger than the maximum allowed size ".concat(this.messageBytesLimit,"KB."));return}this.hasMessageFor(r)&&this.remove(r),this.push(n,o,r)},e.prototype.push=function(t,r,n){var o=this;this.flushController.notifyBeforeAddMessage(r),n!==void 0?(this.upsertBuffer[n]=t,this.flushController.notifyAfterAddMessage()):this.encoder.write(this.encoder.isEmpty?t:`
`.concat(t),function(i){o.flushController.notifyAfterAddMessage(i-r)})},e.prototype.remove=function(t){var r=this.upsertBuffer[t];delete this.upsertBuffer[t];var n=this.encoder.estimateEncodedBytesCount(r);this.flushController.notifyAfterRemoveMessage(n)},e.prototype.hasMessageFor=function(t){return t!==void 0&&this.upsertBuffer[t]!==void 0},e}();function Un(e,t){var r;return typeof e.output=="string"?r=e.output:r=new Blob([e.output],{type:"text/plain"}),{data:r,bytesCount:e.outputBytesCount,encoding:e.encoding,flushReason:t.reason}}function gr(e){var t=e.messagesLimit,r=e.bytesLimit,n=e.durationLimit,o=e.pageExitObservable,i=e.sessionExpireObservable,a=o.subscribe(function(v){return l(v.reason)}),u=i.subscribe(function(){return l("session_expire")}),c=new g(function(){return function(){a.unsubscribe(),u.unsubscribe()}}),s=0,f=0;function l(v){if(f!==0){var O=f,T=s;f=0,s=0,R(),c.notify({reason:v,messagesCount:O,bytesCount:T})}}var p;function b(){p===void 0&&(p=W(function(){l("duration_limit")},n))}function R(){tt(p),p=void 0}return{flushObservable:c,get messagesCount(){return f},notifyBeforeAddMessage:function(v){s+v>=r&&l("bytes_limit"),f+=1,s+=v,b()},notifyAfterAddMessage:function(v){v===void 0&&(v=0),s+=v,f>=t?l("messages_limit"):s>=r&&l("bytes_limit")},notifyAfterRemoveMessage:function(v){s-=v,f-=1,f===0&&R()}}}function Ie(e,t,r,n,o,i){var a=c(e,t),u=r&&c(e,r);function c(s,f){var l=f.endpoint,p=f.encoder;return new Pn(p,dr(s,l,s.batchBytesLimit,n),gr({messagesLimit:s.batchMessagesLimit,bytesLimit:s.batchBytesLimit,durationLimit:s.flushTimeout,pageExitObservable:o,sessionExpireObservable:i}),s.messageBytesLimit)}return{flushObservable:a.flushController.flushObservable,add:function(s,f){f===void 0&&(f=!0),a.add(s),u&&f&&u.add(r.transformMessage?r.transformMessage(s):s)},upsert:function(s,f){a.upsert(s,f),u&&u.upsert(r.transformMessage?r.transformMessage(s):s,f)},stop:function(){a.stop(),u?.stop()}}}function le(){var e="",t=0;return{isAsync:!1,get isEmpty(){return!e},write:function(r,n){var o=me(r);t+=o,e+=r,n&&n(o)},finish:function(r){r(this.finishSync())},finishSync:function(){var r={output:e,outputBytesCount:t,rawBytesCount:t,pendingData:""};return e="",t=0,r},estimateEncodedBytesCount:function(r){return r.length}}}var br=function(){function e(){this.callbacks={}}return e.prototype.notify=function(t,r){var n=this.callbacks[t];n&&n.forEach(function(o){return o(r)})},e.prototype.subscribe=function(t,r){var n=this;return this.callbacks[t]||(this.callbacks[t]=[]),this.callbacks[t].push(r),{unsubscribe:function(){n.callbacks[t]=n.callbacks[t].filter(function(o){return r!==o})}}},e}();function Bn(e,t,r){var n=0,o=!1;return{isLimitReached:function(){if(n===0&&W(function(){n=0},P),n+=1,n<=t||o)return o=!1,!1;if(n===t+1){o=!0;try{r({message:"Reached max number of ".concat(e,"s by minute: ").concat(t),source:E.AGENT,startClocks:M()})}finally{o=!1}}return!0}}}var hr,Sr=new WeakMap;function yr(e){return hr||(hr=Na(e)),hr}function Na(e){return new g(function(t){var r=V(XMLHttpRequest.prototype,"open",Ua).stop,n=V(XMLHttpRequest.prototype,"send",function(i){Pa(i,e,t)}).stop,o=V(XMLHttpRequest.prototype,"abort",Ba).stop;return function(){r(),n(),o()}})}function Ua(e){var t=e.target,r=e.parameters,n=r[0],o=r[1];Sr.set(t,{state:"open",method:String(n).toUpperCase(),url:xe(String(o))})}function Pa(e,t,r){var n=e.target,o=Sr.get(n);if(!!o){var i=o;i.state="start",i.startClocks=M(),i.isAborted=!1,i.xhr=n;var a=!1,u=V(n,"onreadystatechange",function(){n.readyState===XMLHttpRequest.DONE&&c()}).stop,c=function(){if(s(),u(),!a){a=!0;var f=o;f.state="complete",f.duration=Gr(i.startClocks.timeStamp,w()),f.status=n.status,r.notify(Jr(f))}},s=q(t,n,"loadend",c).stop;r.notify(i)}}function Ba(e){var t=e.target,r=Sr.get(t);r&&(r.isAborted=!0)}var xr;function Er(){return xr||(xr=Ma()),xr}function Ma(){return new g(function(e){if(!!window.fetch){var t=V(window,"fetch",function(r){return Da(r,e)}).stop;return t}})}function Da(e,t){var r=e.parameters,n=e.onPostCall,o=r[0],i=r[1],a=i&&i.method;a===void 0&&o instanceof Request&&(a=o.method);var u=a!==void 0?String(a).toUpperCase():"GET",c=o instanceof Request?o.url:xe(String(o)),s=M(),f={state:"start",init:i,input:o,method:u,startClocks:s,url:c};t.notify(f),r[0]=f.input,r[1]=f.init,n(function(l){return ja(t,l,f)})}function ja(e,t,r){var n=function(o){var i=r;i.state="resolve","stack"in o||o instanceof Error?(i.status=0,i.isAborted=o instanceof DOMException&&o.code===DOMException.ABORT_ERR,i.error=o):"status"in o&&(i.response=o,i.responseType=o.type,i.status=o.status,i.isAborted=!1),e.notify(i)};t.then(m(n),m(n))}var Tr={};function _r(e){var t=e.map(function(r){return Tr[r]||(Tr[r]=Fa(r)),Tr[r]});return rt.apply(void 0,t)}function Fa(e){return new g(function(t){var r=B[e];return B[e]=function(){for(var n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];r.apply(console,n);var i=rr();ee(function(){t.notify(Ga(n,e,i))})},function(){B[e]=r}})}function Ga(e,t,r){var n=e.map(function(c){return Ha(c)}).join(" "),o,i,a;if(t===I.error){var u=Kr(e,function(c){return c instanceof Error});o=u?H(L(u)):void 0,i=Qt(u),a=u?nr(u,"console"):void 0}return{api:t,message:n,stack:o,handlingStack:r,fingerprint:i,causes:a}}function Ha(e){return typeof e=="string"?N(e):e instanceof Error?tr(L(e)):G(N(e),void 0,2)}var qa=500,Cr=function(){function e(){this.buffer=[]}return e.prototype.add=function(t){var r=this.buffer.push(t);r>qa&&this.buffer.splice(0,1)},e.prototype.remove=function(t){It(this.buffer,t)},e.prototype.drain=function(t){this.buffer.forEach(function(r){return r(t)}),this.buffer.length=0},e}();function Le(e){var t={},r=new g,n={getContext:function(){return Et(t)},setContext:function(o){_e(o)==="object"?(t=N(o),e.updateCustomerData(t)):n.clearContext(),r.notify()},setContextProperty:function(o,i){t[o]=N(i),e.updateCustomerData(t),r.notify()},removeContextProperty:function(o){delete t[o],e.updateCustomerData(t),r.notify()},clearContext:function(){t={},e.resetCustomerData(),r.notify()},changeObservable:r};return n}var Ya="_dd_c",Ka=[];function wt(e,t,r,n){var o=za(r,n);Ka.push(q(e,window,_.STORAGE,function(c){var s=c.key;o===s&&i()})),t.changeObservable.subscribe(a),t.setContext(K(u(),t.getContext()));function i(){t.setContext(u())}function a(){localStorage.setItem(o,JSON.stringify(t.getContext()))}function u(){var c=localStorage.getItem(o);return c!==null?JSON.parse(c):{}}}function za(e,t){return"".concat(Ya,"_").concat(e,"_").concat(t)}var Mn=3*k,Wa=16*k,Ja=200;function Ir(e){e===void 0&&(e=2);var t=new Map,r=!1;function n(o){if(o===void 0&&(o=0),!(r||e===0)){var i=e===2?Mn:Wa,a=o;t.forEach(function(u){a+=u.getBytesCount()}),a>i&&(Xa(i),r=!0)}}return{createDetachedTracker:function(){var o=Or(function(){return n(o.getBytesCount())});return o},getOrCreateTracker:function(o){return t.has(o)||t.set(o,Or(n)),t.get(o)},setCompressionStatus:function(o){e===0&&(e=o,n())},getCompressionStatus:function(){return e},stop:function(){t.forEach(function(o){return o.stop()}),t.clear()}}}function Or(e){var t=0,r=nt(function(a){t=me(G(a)),e()},Ja),n=r.throttled,o=r.cancel,i=function(){o(),t=0};return{updateCustomerData:function(a){be(a)?i():n(a)},resetCustomerData:i,getBytesCount:function(){return t},stop:function(){o()}}}function Xa(e){h.warn("Customer data exceeds the recommended ".concat(e/k,"KiB threshold. More details: https://docs.datadoghq.com/real_user_monitoring/browser/troubleshooting/#customer-data-exceeds-the-recommended-threshold-warning"))}function Lr(e,t,r){var n=e.getReader(),o=[],i=0;a();function a(){n.read().then(m(function(c){if(c.done){u();return}r.collectStreamBody&&o.push(c.value),i+=c.value.length,i>r.bytesLimit?u():a()}),m(function(c){return t(c)}))}function u(){n.cancel().catch(A);var c,s;if(r.collectStreamBody){var f;if(o.length===1)f=o[0];else{f=new Uint8Array(i);var l=0;o.forEach(function(p){f.set(p,l),l+=p.length})}c=f.slice(0,r.bytesLimit),s=f.length>r.bytesLimit}t(void 0,c,s)}}var Va="datadog-synthetics-public-id",$a="datadog-synthetics-result-id",Za="datadog-synthetics-injects-rum";function Ye(){return Boolean(window._DATADOG_SYNTHETICS_INJECTS_RUM||te(Za))}function Rr(){var e=window._DATADOG_SYNTHETICS_PUBLIC_ID||te(Va);return typeof e=="string"?e:void 0}function wr(){var e=window._DATADOG_SYNTHETICS_RESULT_ID||te($a);return typeof e=="string"?e:void 0}function At(e){var t=x({},e),r=["id","name","email"];return r.forEach(function(n){n in t&&(t[n]=String(t[n]))}),t}function Ar(e){var t=_e(e)==="object";return t||h.error("Unsupported user:",e),t}var Qa=function(e,t,r,n){var o=arguments.length,i=o<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(e,t,r,n);else for(var u=e.length-1;u>=0;u--)(a=e[u])&&(i=(o<3?a(i):o>3?a(t,r,i):a(t,r))||i);return o>3&&i&&Object.defineProperty(t,r,i),i},S={debug:"debug",error:"error",info:"info",warn:"warn"},Ke={console:"console",http:"http",silent:"silent"},Dn=Object.keys(S),kt=function(){function e(t,r,n,o,i,a){o===void 0&&(o=Ke.http),i===void 0&&(i=S.debug),a===void 0&&(a={}),this.handleLogStrategy=t,this.handlerType=o,this.level=i,this.contextManager=Le(r),this.contextManager.setContext(a),n&&this.contextManager.setContextProperty("logger",{name:n})}return e.prototype.log=function(t,r,n,o){n===void 0&&(n=S.info);var i;if(o!=null){var a=o instanceof Error?L(o):void 0,u=De({stackTrace:a,originalError:o,nonErrorPrefix:"Provided",source:E.LOGGER,handling:"handled",startClocks:M()});i={stack:u.stack,kind:u.type,message:u.message,causes:u.causes}}var c=N(r),s=i?K({error:i},c):c;this.handleLogStrategy({message:N(t),context:s,status:n},this)},e.prototype.debug=function(t,r,n){this.log(t,r,S.debug,n)},e.prototype.info=function(t,r,n){this.log(t,r,S.info,n)},e.prototype.warn=function(t,r,n){this.log(t,r,S.warn,n)},e.prototype.error=function(t,r,n){this.log(t,r,S.error,n)},e.prototype.setContext=function(t){this.contextManager.setContext(t)},e.prototype.getContext=function(){return this.contextManager.getContext()},e.prototype.setContextProperty=function(t,r){this.contextManager.setContextProperty(t,r)},e.prototype.removeContextProperty=function(t){this.contextManager.removeContextProperty(t)},e.prototype.clearContext=function(){this.contextManager.clearContext()},e.prototype.setHandler=function(t){this.handlerType=t},e.prototype.getHandler=function(){return this.handlerType},e.prototype.setLevel=function(t){this.level=t},e.prototype.getLevel=function(){return this.level},Qa([qt],e.prototype,"log",null),e}();function jn(e,t){return{view:{referrer:document.referrer,url:window.location.href},context:e.getContext(),user:t.getContext()}}var es=32*k;function Gn(e){e.usePciIntake===!0&&e.site&&e.site!=="datadoghq.com"&&h.warn("PCI compliance for Logs is only available for Datadog organizations in the US1 site. Default intake will be used.");var t=ht(e),r=Fn(e.forwardConsoleLogs,z(I),"Forward Console Logs"),n=Fn(e.forwardReports,z(Y),"Forward Reports");if(!(!t||!r||!n))return e.forwardErrorsToLogs&&!D(r,I.error)&&r.push(I.error),x({forwardErrorsToLogs:e.forwardErrorsToLogs!==!1,forwardConsoleLogs:r,forwardReports:n,requestErrorResponseLengthLimit:es},t)}function Fn(e,t,r){if(e===void 0)return[];if(!(e==="all"||Array.isArray(e)&&e.every(function(n){return D(t,n)}))){h.error("".concat(r,' should be "all" or an array with allowed values "').concat(t.join('", "'),'"'));return}return e==="all"?t:Tn(e)}function Hn(e){var t=St(e);return x({forward_errors_to_logs:e.forwardErrorsToLogs,forward_console_logs:e.forwardConsoleLogs,forward_reports:e.forwardReports,use_pci_intake:e.usePciIntake},t)}function qn(e,t,r){var n=new Cr,o,i,a=t.observable.subscribe(u);function u(){if(!(!i||!o||!t.isGranted())){a.unsubscribe();var c=r(o,i);n.drain(c)}}return{init:function(c){if(!c){h.error("Missing configuration");return}if(re()&&(c=ts(c)),o=c,i){je("DD_LOGS",c);return}var s=Gn(c);!s||(i=s,t.tryToInit(s.trackingConsent),u())},get initConfiguration(){return o},getInternalContext:A,handleLog:function(c,s,f,l){f===void 0&&(f=e()),l===void 0&&(l=w()),n.add(function(p){return p.handleLog(c,s,f,l)})}}}function ts(e){return x({},e,{clientToken:"empty"})}var Yn="logs";function Kn(e){var t=Ir(),r=Le(t.getOrCreateTracker(2)),n=Le(t.getOrCreateTracker(1)),o=Wt();function i(){return jn(r,n)}var a=qn(i,o,function(s,f){s.storeContextsAcrossPages&&(wt(f,r,Yn,2),wt(f,n,Yn,1));var l=e(s,f,i,o);return a=rs(s,l),l}),u={},c=new kt(function(){for(var s=[],f=0;f<arguments.length;f++)s[f]=arguments[f];return a.handleLog.apply(a,s)},t.createDetachedTracker());return ir({logger:c,init:m(function(s){return a.init(s)}),setTrackingConsent:m(function(s){return o.update(s)}),getGlobalContext:m(function(){return r.getContext()}),setGlobalContext:m(function(s){return r.setContext(s)}),setGlobalContextProperty:m(function(s,f){return r.setContextProperty(s,f)}),removeGlobalContextProperty:m(function(s){return r.removeContextProperty(s)}),clearGlobalContext:m(function(){return r.clearContext()}),createLogger:m(function(s,f){return f===void 0&&(f={}),u[s]=new kt(function(){for(var l=[],p=0;p<arguments.length;p++)l[p]=arguments[p];return a.handleLog.apply(a,l)},t.createDetachedTracker(),N(s),f.handler,f.level,N(f.context)),u[s]}),getLogger:m(function(s){return u[s]}),getInitConfiguration:m(function(){return Et(a.initConfiguration)}),getInternalContext:m(function(s){return a.getInternalContext(s)}),setUser:m(function(s){Ar(s)&&n.setContext(At(s))}),getUser:m(function(){return n.getContext()}),setUserProperty:m(function(s,f){var l,p=At((l={},l[s]=f,l))[s];n.setContextProperty(s,p)}),removeUserProperty:m(function(s){return n.removeContextProperty(s)}),clearUser:m(function(){return n.clearContext()})})}function rs(e,t){return x({init:function(r){je("DD_LOGS",r)},initConfiguration:e},t)}var ns="logs";function zn(e,t){var r=fr(e,ns,function(n){return os(e,n)},t);return{findTrackedSession:function(n){var o=r.findActiveSession(n);return o&&o.trackingType==="1"?{id:o.id}:void 0},expireObservable:r.expireObservable}}function Wn(e){var t=Jn(e)==="1",r=t?{}:void 0;return{findTrackedSession:function(){return r},expireObservable:new g}}function Jn(e){return Ne(e.sessionSampleRate)?"1":"0"}function os(e,t){var r=is(t)?t:Jn(e);return{trackingType:r,isTracked:r==="1"}}function is(e){return e==="0"||e==="1"}var Xn=!1;function Re(e){var t=window;if(Ye()){var r=n(t.DD_RUM_SYNTHETICS);return!r&&!Xn&&(Xn=!0,Ce("Logs sent before RUM is injected by the synthetics worker",{testId:Rr(),resultId:wr()})),r}return n(t.DD_RUM);function n(o){if(o&&o.getInternalContext)return o.getInternalContext(e)}}function Vn(e,t,r,n,o){var i=Dn.concat(["custom"]),a={};i.forEach(function(u){a[u]=Bn(u,t.eventRateLimiterThreshold,o)}),r.subscribe(0,function(u){var c,s,f=u.rawLogsEvent,l=u.messageContext,p=l===void 0?void 0:l,b=u.savedCommonContext,R=b===void 0?void 0:b,v=qr(f.date),O=e.findTrackedSession(v);if(!!O){var T=R||n(),Z=K({service:t.service,session_id:O.id,usr:be(T.user)?void 0:T.user,view:T.view},T.context,Re(v),f,p);((c=t.beforeSend)===null||c===void 0?void 0:c.call(t,Z))===!1||Z.origin!==E.AGENT&&((s=a[Z.status])!==null&&s!==void 0?s:a.custom).isLimitReached()||r.notify(1,Z)}})}var pe,as=(pe={},pe[I.log]=S.info,pe[I.debug]=S.debug,pe[I.info]=S.info,pe[I.warn]=S.warn,pe[I.error]=S.error,pe);function $n(e,t){var r=_r(e.forwardConsoleLogs).subscribe(function(n){t.notify(0,{rawLogsEvent:{date:w(),message:n.message,origin:E.CONSOLE,error:n.api===I.error?{stack:n.stack,fingerprint:n.fingerprint,causes:n.causes}:void 0,status:as[n.api]}})});return{stop:function(){r.unsubscribe()}}}var ze,ss=(ze={},ze[Y.cspViolation]=S.error,ze[Y.intervention]=S.error,ze[Y.deprecation]=S.warn,ze);function Zn(e,t){var r=sr(e,e.forwardReports).subscribe(function(n){var o=n.message,i=ss[n.type],a;i===S.error?a={kind:n.subtype,stack:n.stack}:n.stack&&(o+=" Found in ".concat(er(n.stack))),t.notify(0,{rawLogsEvent:{date:w(),message:o,origin:E.REPORT,error:a,status:i}})});return{stop:function(){r.unsubscribe()}}}function Qn(e,t){if(!e.forwardErrorsToLogs)return{stop:A};var r=yr(e).subscribe(function(i){i.state==="complete"&&o("xhr",i)}),n=Er().subscribe(function(i){i.state==="resolve"&&o("fetch",i)});function o(i,a){!e.isIntakeUrl(a.url)&&(ls(a)||Rt(a.status))&&("xhr"in a?us(a.xhr,e,u):a.response?fs(a.response,e,u):a.error&&cs(a.error,e,u));function u(c){t.notify(0,{rawLogsEvent:{message:"".concat(ps(i)," error ").concat(a.method," ").concat(a.url),date:a.startClocks.timeStamp,error:{stack:c||"Failed to load"},http:{method:a.method,status_code:a.status,url:a.url},status:S.error,origin:E.NETWORK}})}}return{stop:function(){r.unsubscribe(),n.unsubscribe()}}}function us(e,t,r){typeof e.response=="string"?r(kr(e.response,t)):r(e.response)}function cs(e,t,r){r(kr(H(L(e)),t))}function fs(e,t,r){var n=Cn(e);!n||!n.body?r():window.TextDecoder?ds(n.body,t.requestErrorResponseLengthLimit,function(o,i){r(o?"Unable to retrieve response: ".concat(o):i)}):n.text().then(m(function(o){return r(kr(o,t))}),m(function(o){return r("Unable to retrieve response: ".concat(o))}))}function ls(e){return e.status===0&&e.responseType!=="opaque"}function kr(e,t){return e.length>t.requestErrorResponseLengthLimit?"".concat(e.substring(0,t.requestErrorResponseLengthLimit),"..."):e}function ps(e){return e==="xhr"?"XHR":"Fetch"}function ds(e,t,r){Lr(e,function(n,o,i){if(n)r(n);else{var a=new TextDecoder().decode(o);i&&(a+="..."),r(void 0,a)}},{bytesLimit:t,collectStreamBody:!0})}function eo(e,t){if(!e.forwardErrorsToLogs)return{stop:A};var r=new g,n=or(r).stop,o=r.subscribe(function(i){t.notify(0,{rawLogsEvent:{message:i.message,date:i.startClocks.timeStamp,error:{kind:i.type,stack:i.stack,causes:i.causes},origin:E.SOURCE,status:S.error}})});return{stop:function(){n(),o.unsubscribe()}}}var to=br;var we,ro=(we={},we[S.debug]=0,we[S.info]=1,we[S.warn]=2,we[S.error]=3,we);function oo(e){function t(r,n,o,i){var a=K(n.getContext(),r.context);no(r.status,Ke.console,n)&&ms(r,a),no(r.status,Ke.http,n)&&e.notify(0,{rawLogsEvent:{date:i||w(),message:r.message,status:r.status,origin:E.LOGGER},messageContext:a,savedCommonContext:o})}return{handleLog:t}}function no(e,t,r){var n=r.getHandler(),o=Array.isArray(n)?n:[n];return ro[e]>=ro[r.getLevel()]&&D(o,t)}function ms(e,t){ne[e.status].call(B,e.message,t)}function io(e,t,r,n,o){var i=Ie(e,{endpoint:e.logsEndpointBuilder,encoder:le()},e.replica&&{endpoint:e.replica.logsEndpointBuilder,encoder:le()},r,n,o.expireObservable);return t.subscribe(1,function(a){i.add(a)}),i}function ao(e){var t=fe();e.subscribe(1,function(r){t.send("log",r)})}function so(e){return{get:function(t){var r=e.findTrackedSession(t);if(r)return{session_id:r.id}}}}function uo(e){return function(t){e.notify(0,{rawLogsEvent:{message:t.message,date:t.startClocks.timeStamp,origin:E.AGENT,status:S.error}}),Ce("Error reported to customer",{"error.message":t.message})}}function co(e,t,r,n,o){var i=_t("browser-logs-sdk",t);i.setContextProvider(function(){var l,p,b,R,v,O;return{application:{id:(l=Re())===null||l===void 0?void 0:l.application_id},session:{id:(p=o.findTrackedSession())===null||p===void 0?void 0:p.id},view:{id:(R=(b=Re())===null||b===void 0?void 0:b.view)===null||R===void 0?void 0:R.id},action:{id:(O=(v=Re())===null||v===void 0?void 0:v.user_action)===null||O===void 0?void 0:O.id}}});var a=[];if(re()){var u=fe(),c=i.observable.subscribe(function(l){return u.send("internal_telemetry",l)});a.push(function(){return c.unsubscribe()})}else{var s=Ie(t,{endpoint:t.rumEndpointBuilder,encoder:le()},t.replica&&{endpoint:t.replica.rumEndpointBuilder,encoder:le()},r,n,o.expireObservable);a.push(function(){return s.stop()});var f=i.observable.subscribe(function(l){return s.add(l,Ct(t))});a.push(function(){return f.unsubscribe()})}return Ot(Hn(e)),{telemetry:i,stop:function(){a.forEach(function(l){return l()})}}}function fo(e,t,r,n){var o=new to,i=[];o.subscribe(1,function(b){return Ge("logs",b)});var a=uo(o),u=mr(t),c=t.sessionStoreStrategyType&&!re()&&!Ye()?zn(t,n):Wn(t),s=co(e,t,a,u,c).stop;i.push(function(){return s()}),Qn(t,o),eo(t,o),$n(t,o),Zn(t,o);var f=oo(o).handleLog;if(Vn(c,t,o,r,a),re())ao(o);else{var l=io(t,o,a,u,c).stop;i.push(function(){return l()})}var p=so(c);return{handleLog:f,getInternalContext:p.get,stop:function(){i.forEach(function(b){return b()})}}}var ae=Kn(fo);ar(j(),"DD_LOGS",ae);function lo(e){return e!==0&&Math.random()*100<=e}var vs=["name"];function We(e){return We=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},We(e)}function gs(e,t){if(e==null)return{};var r=bs(e,t),n,o;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)n=i[o],!(t.indexOf(n)>=0)&&(!Object.prototype.propertyIsEnumerable.call(e,n)||(r[n]=e[n]))}return r}function bs(e,t){if(e==null)return{};var r={},n=Object.keys(e),o,i;for(i=0;i<n.length;i++)o=n[i],!(t.indexOf(o)>=0)&&(r[o]=e[o]);return r}function hs(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function po(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,vo(n.key),n)}}function Ss(e,t,r){return t&&po(e.prototype,t),r&&po(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function mo(e,t,r){return t=vo(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function vo(e){var t=ys(e,"string");return We(t)=="symbol"?t:String(t)}function ys(e,t){if(We(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(We(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var go=function(){function e(t){hs(this,e),mo(this,"loggerName",void 0),mo(this,"currLogger",void 0);var r=t.name,n=gs(t,vs);this.loggerName=r,this.createLogger(n)}return Ss(e,[{key:"createLogger",value:function(r){return this.currLogger?this.currLogger:(ae.createLogger(this.loggerName,{level:r.level||"info",handler:r.handler||"http",context:{context:Object.assign({type:this.loggerName},r.context)}}),this.currLogger=ae.getLogger(this.loggerName))}},{key:"sendLog",value:function(r){if(!this.currLogger){"Failed to create ".concat(this.loggerName," when sendLog");return}var n=r.message,o=r.data,i=r.status,a=i===void 0?"info":i,u=r.error;this.currLogger.log(n,{data:o},a,u)}},{key:"setContext",value:function(r){if(!this.currLogger){"Failed to create ".concat(this.loggerName," when setContext");return}this.currLogger.setContext({context:r})}}]),e}();var xs=5;function Wv(e){var t=e.enableTracking,r=t===void 0?!1:t,n=e.clientToken,o=e.site,i=e.service,a=e.version,u=a===void 0?"1.0.0":a,c=e.env,s=c===void 0?"development":c,f=e.forwardErrorsToLogs,l=e.sessionSampleRate,p=e.httpLoggerSuccessSampleRate,b=p===void 0?xs:p;ae.init({clientToken:n||"pub6aa98b53942c3e159a557786d378f28d",site:o||"datadoghq.com",forwardErrorsToLogs:f||!1,sessionSampleRate:l||100,service:i,version:u,env:s,beforeSend:function(v){var O,T;return r?(v==null||(O=v.context)===null||O===void 0?void 0:O.type)==="httpLogger"&&(v==null||(T=v.data)===null||T===void 0||(T=T.httpData)===null||T===void 0?void 0:T.status)===200?lo(b):!0:!1}})}function Jv(e){var t=e.message,r=e.data,n=e.status,o=n===void 0?"info":n,i=e.error;ae.logger.log(t,{data:r},o,i)}function Xv(e){ae.setUser(e)}var Vv=new go({name:"httpLogger"});export{Wv as a,Jv as b,Xv as c,Vv as d,Is as e,Os as f,Ut as g,To as h,Ur as i,Go as j,qo as k,Zo as l,yu as m};
